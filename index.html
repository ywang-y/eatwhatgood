<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>今日食乜好？</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        .meal-suggestion-card, .restaurant-suggestion-card, .ai-steps-card {
            min-height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease-in-out;
        }
        .cuisine-btn, .mood-btn {
            transition: all 0.2s ease-in-out;
            margin: 0.25rem;
        }
        .suggestion-update {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .selected-btn {
            --tw-ring-color: theme('colors.orange.500', '#F97316');
            box-shadow: 0 0 0 2px var(--tw-ring-color);
            transform: scale(1.03);
            filter: brightness(1.05);
        }
        .mood-btn.selected-btn {
             background-color: theme('colors.purple.500');
             color: theme('colors.white');
             --tw-ring-color: theme('colors.purple.700');
        }
        .cuisine-btn.selected-btn {
            background-color: theme('colors.sky.500');
            color: theme('colors.white');
            --tw-ring-color: theme('colors.sky.700');
        }
        .list-disc { list-style-type: disc; padding-left: 1.5rem; }
        .google-maps-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            background-color: #4285F4;
            color: white;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
            text-decoration: none;
        }
        .google-maps-btn:hover { background-color: #3578E5; }
        .google-maps-btn i { margin-right: 0.5rem; }

        .restaurant-link {
            background-color: transparent;
            color: theme('colors.gray.800', '#1F2937'); /* Darker gray for better readability */
            padding: 0;
            font-weight: bold;
            text-decoration: none;
        }
        .restaurant-link:hover {
            color: theme('colors.green.600', '#059669'); /* Theme color on hover */
            text-decoration: underline;
        }

        select { padding: 0.5rem 2.5rem 0.5rem 0.75rem; border-radius: 0.375rem; border: 1px solid #D1D5DB; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; -webkit-appearance: none; -moz-appearance: none; appearance: none; }
        select:focus { outline: 2px solid transparent; outline-offset: 2px; border-color: #2563EB; box-shadow: 0 0 0 2px #BFDBFE; }
        .loading-dots span {
            animation: blink 1.4s infinite both;
            font-size: 1.5em; /* Make dots bigger */
        }
        .loading-dots span:nth-child(2) { animation-delay: .2s; }
        .loading-dots span:nth-child(3) { animation-delay: .4s; }
        @keyframes blink { 0%, 80%, 100% { opacity: 0; } 40% { opacity: 1; } }
    </style>
</head>
<body class="bg-gradient-to-br from-lime-100 to-green-200 min-h-screen flex flex-col items-center justify-center p-4 selection:bg-green-500 selection:text-white">

    <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-3xl text-center">

        <div id="pageMealTimeSelection">
            <header class="mb-6 sm:mb-8">
                <h1 class="text-4xl sm:text-5xl font-bold text-green-600">今日食乜好？</h1>
                <p class="text-gray-600 mt-2 text-sm sm:text-base">唔知食咩？等我幫你揀！仲可以搵埋餐廳！</p>
            </header>
            <div class="mb-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2">
                <button data-mealtype="breakfast" class="meal-time-btn bg-yellow-400 hover:bg-yellow-500 text-yellow-800 font-semibold py-2 px-4 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-105 w-full">早餐</button>
                <button data-mealtype="lunch" class="meal-time-btn bg-green-400 hover:bg-green-500 text-green-800 font-semibold py-2 px-4 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-105 w-full">午餐</button>
                <button data-mealtype="afternoonTea" class="meal-time-btn bg-orange-400 hover:bg-orange-500 text-orange-800 font-semibold py-2 px-4 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-105 w-full">下午茶</button>
                <button data-mealtype="dinner" class="meal-time-btn bg-red-400 hover:bg-red-500 text-red-800 font-semibold py-2 px-4 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-105 w-full">晚餐</button>
                <button data-mealtype="supper" class="meal-time-btn bg-indigo-400 hover:bg-indigo-500 text-indigo-800 font-semibold py-2 px-4 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-105 w-full">宵夜</button>
            </div>
            <p id="initialPrompt" class="text-xl sm:text-2xl font-semibold text-gray-700 mt-8">請先選擇「時段」</p>
        </div>

        <div id="pageDetailsSelection" class="hidden w-full">
            <div class="flex justify-between items-center mb-6">
                <h2 id="selectedMealTimeHeader" class="text-2xl sm:text-3xl font-bold text-green-700 text-left"></h2>
                <button id="btnGoBack" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg shadow text-sm flex items-center">
                    <i class="fas fa-arrow-left mr-1"></i> 返回
                </button>
            </div>

            <div class="my-4 sm:my-6 text-left">
                <h3 class="text-lg font-semibold text-gray-700 mb-2">1. 你嘅覓食心情係？ <span class="text-sm text-gray-500">(可選)</span></h3>
                <div id="moodSelectionArea" class="flex flex-wrap justify-center items-center border border-gray-200 p-2 rounded-md"></div>
            </div>

            <div class="my-4 sm:my-6 text-left">
                <h3 class="text-lg font-semibold text-gray-700 mb-2">2. 請選擇菜式：</h3>
                <div id="cuisineSelectionArea" class="flex flex-wrap justify-center items-center border border-gray-200 p-2 rounded-md"></div>
            </div>

            <div class="my-4 space-y-2 sm:space-y-0 sm:space-x-2 flex flex-col sm:flex-row justify-center">
                <button id="btnSurpriseCuisine" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-lg transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto text-base">
                    <i class="fas fa-random mr-1"></i> 隨機揀個菜式
                </button>
                <button id="btnAiSuggestDishForCuisine" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg shadow-lg transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto text-base disabled:opacity-50" disabled>
                    ✨ AI幫我喺「<span id="aiSuggestDishCuisineName"></span>」搵靈感 ✨
                </button>
            </div>
             <p id="aiDishLoadingMessage" class="text-sm text-gray-600 mt-2 hidden">AI 諗緊菜式名<span class="loading-dots"><span>.</span><span>.</span><span>.</span></span></p>


            <div id="suggestionArea" class="my-6 sm:my-8 p-4 sm:p-6 bg-gray-100 rounded-lg meal-suggestion-card shadow-inner">
                 <h3 class="text-lg font-semibold text-gray-700 mb-2 self-start text-left">3. 食乜好建議：</h3>
                <p id="txtSuggestion" class="text-xl sm:text-2xl font-semibold text-gray-700">請選擇心情及菜式，或按「隨機揀個菜式」</p>
            </div>

            <div class="space-y-2 sm:space-y-0 sm:space-x-2 flex flex-col sm:flex-row justify-center mb-4">
                <button id="btnTryAgainMeal" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto hidden">
                    <i class="fas fa-redo mr-1"></i> 唔啱？再揀過 (呢個餸)
                </button>
                <button id="btnAiCookingSteps" class="bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg shadow-lg transition duration-150 ease-in-out transform hover:scale-105 w-full sm:w-auto text-base hidden">
                    ✨ AI教我點煮「<span id="aiCookingStepsDishName"></span>」✨
                </button>
            </div>
            <div id="aiCookingStepsDisplayArea" class="my-4 p-4 bg-indigo-50 rounded-lg ai-steps-card shadow-inner hidden text-left">
                </div>
             <p id="aiCookingStepsLoadingMessage" class="text-sm text-gray-600 mt-2 hidden">AI 諗緊點煮<span class="loading-dots"><span>.</span><span>.</span><span>.</span></span></p>


            <div id="districtSelectionContainer" class="my-4 sm:my-6 text-left hidden">
                <h3 class="text-lg font-semibold text-gray-700 mb-2">4. 想搵埋餐廳？請選擇地區：</h3>
                <div class="mb-3">
                    <button id="btnGetLocation" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md text-sm flex items-center justify-center w-full sm:w-auto">
                        <i class="fas fa-location-arrow mr-2"></i> 讀取我的位置並嘗試估算地區
                    </button>
                    <p id="locationStatusMessage" class="text-xs text-gray-600 mt-1"></p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <label for="districtLevel1Dropdown" class="block text-sm font-medium text-gray-700 mb-1">選擇區域 (十八區):</label>
                        <select id="districtLevel1Dropdown" class="w-full"></select>
                    </div>
                    <div>
                        <label for="districtLevel2Dropdown" class="block text-sm font-medium text-gray-700 mb-1">選擇詳細地區:</label>
                        <select id="districtLevel2Dropdown" class="w-full" disabled></select>
                    </div>
                </div>
            </div>

            <div id="restaurantSuggestionArea" class="my-4 sm:my-6 p-4 bg-sky-50 rounded-lg restaurant-suggestion-card shadow-inner hidden">
                <p id="txtRestaurantSuggestion" class="text-lg font-medium text-sky-700"></p>
                <div id="googleMapsLinkContainer" class="mt-4 hidden">
                    <a id="googleMapsLink" href="#" target="_blank" class="google-maps-btn">
                        <i class="fas fa-map-marker-alt"></i>在 Google 地圖上搜尋 (綜合)
                    </a>
                </div>
                <p class="text-xs text-gray-500 mt-3">提示：以上餐廳列表為內置範例。點擊餐廳名稱可直接搜尋該餐廳。建議使用 Google 地圖獲取最新及更全面的資訊。</p>
            </div>
        </div>
        <footer class="mt-8 text-center text-sm text-gray-600">
            <p>© <span id="currentYear"></span> 搵食助手</p>
        </footer>
    </div>

    <script>
        // --- DOM Elements ---
        const pageMealTimeSelection = document.getElementById('pageMealTimeSelection');
        const pageDetailsSelection = document.getElementById('pageDetailsSelection');
        const initialPrompt = document.getElementById('initialPrompt');
        const selectedMealTimeHeader = document.getElementById('selectedMealTimeHeader');
        const btnGoBack = document.getElementById('btnGoBack');

        const mealTimeButtons = document.querySelectorAll('#pageMealTimeSelection .meal-time-btn');
        const moodSelectionArea = document.getElementById('moodSelectionArea');
        const cuisineSelectionArea = document.getElementById('cuisineSelectionArea');
        const districtLevel1Dropdown = document.getElementById('districtLevel1Dropdown');
        const districtLevel2Dropdown = document.getElementById('districtLevel2Dropdown');
        const districtSelectionContainer = document.getElementById('districtSelectionContainer');
        const btnGetLocation = document.getElementById('btnGetLocation');
        const locationStatusMessage = document.getElementById('locationStatusMessage');

        const suggestionArea = document.getElementById('suggestionArea');
        const txtSuggestion = document.getElementById('txtSuggestion');
        const restaurantSuggestionArea = document.getElementById('restaurantSuggestionArea');
        const txtRestaurantSuggestion = document.getElementById('txtRestaurantSuggestion');
        const googleMapsLinkContainer = document.getElementById('googleMapsLinkContainer');
        const googleMapsLink = document.getElementById('googleMapsLink');
        const btnSurpriseCuisine = document.getElementById('btnSurpriseCuisine');
        const btnAiSuggestDishForCuisine = document.getElementById('btnAiSuggestDishForCuisine');
        const aiSuggestDishCuisineName = document.getElementById('aiSuggestDishCuisineName');
        const aiDishLoadingMessage = document.getElementById('aiDishLoadingMessage');
        const btnTryAgainMeal = document.getElementById('btnTryAgainMeal');
        const btnAiCookingSteps = document.getElementById('btnAiCookingSteps');
        const aiCookingStepsDishName = document.getElementById('aiCookingStepsDishName');
        const aiCookingStepsDisplayArea = document.getElementById('aiCookingStepsDisplayArea');
        const aiCookingStepsLoadingMessage = document.getElementById('aiCookingStepsLoadingMessage');
        const currentYearSpan = document.getElementById('currentYear');

        // --- Meal Data with Moods (Restored) ---
        const mealData = { /* ... (same as previous version - v11) ... */
            breakfast: {
                "港式": [ { name: "沙嗲牛肉麵配炒蛋多士", moods: ["Comfort Food", "快靚正"] }, { name: "雪菜肉絲米粉", moods: ["快靚正", "健康清淡啲～"] }, { name: "腿蛋治", moods: ["快靚正"] }, { name: "火腿通粉", moods: ["快靚正", "Comfort Food"] }, { name: "皮蛋瘦肉粥配炒麵", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "腸粉", moods: ["快靚正", "Comfort Food"] },  { name: "鮮油菠蘿包", moods: ["Comfort Food"] }, { name: "餐蛋麵", moods: ["快靚正", "Comfort Food"] }, { name: "即叫即製粢飯", moods: ["Comfort Food"] }, { name: "魚柳包", moods: ["快靚正"] }, { name: "豬扒包", moods: ["Comfort Food"] }, { name: "雞批", moods: ["Comfort Food"] }, { name: "腿蓉奄列", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "鮮茄牛肉通粉", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "炸菜肉絲公仔麵", moods: ["快靚正", "Comfort Food"] }, { name: "五香肉丁公仔麵", moods: ["快靓正", "Comfort Food"] } ],
                "西式": [ { name: "穀物片", moods: ["健康清淡啲～", "快靚正"] }, { name: "乳酪杯配水果麥片", moods: ["健康清淡啲～"] }, { name: "煙肉蛋奄列配薯餅", moods: ["Comfort Food"] }, { name: "英式鬆餅 (Scones)", moods: ["想食豪啲！"] }, { name: "鬆餅 (Pancakes)", moods: ["Comfort Food"] }, { name: "法式吐司 (French Toast)", moods: ["Comfort Food"] }, { name: "牛角包", moods: ["快靚正"] }, { name: "英式全餐 (Full English)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "煙三文魚貝果 (Bagel)", moods: ["健康清淡啲～", "想食豪啲！"] }, { name: "窩夫 (Waffles)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "煙三文魚炒蛋", moods: ["想食豪啲！", "健康清淡啲～"] }, { name: "芝士火腿可頌 (Croissant)", moods: ["Comfort Food"] }, { name: "牛油果多士", moods: ["健康清淡啲～"] }, { name: "炒雜菌多士", moods: ["健康清淡啲～"] } ],
                "中式": [ { name: "蝦餃燒賣", moods: ["Comfort Food"] }, { name: "糯米雞", moods: ["Comfort Food"] }, { name: "牛肉球", moods: ["Comfort Food"] }, { name: "菜肉包", moods: ["快靚正"] }, { name: "潮州粉粿", moods: [] }, { name: "上海粢飯糰", moods: ["Comfort Food"] }, { name: "粥品 (白粥/皮蛋瘦肉粥)", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "煎堆油炸鬼", moods: ["Comfort Food"] }, { name: "饅頭", moods: ["健康清淡啲～", "快靚正"] }, { name: "鹹豆漿", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "生煎包", moods: ["Comfort Food"] }, { name: "小籠包", moods: ["Comfort Food"] }, { name: "窩貼", moods: ["Comfort Food"] }, { name: "韮菜盒", moods: ["Comfort Food"] } ],
                "台式": [ { name: "台式飯糰 (古早味)", moods: ["Comfort Food", "快靚正"] }, { name: "蛋餅 (原味/芝士/粟米)", moods: ["快靚正", "Comfort Food"] }, { name: "台式鹹豆漿", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "總匯三文治 (台式)", moods: ["快靚正", "Comfort Food"] }, { name: "刈包 (早餐版)", moods: ["Comfort Food"] }, { name: "蘿蔔糕 (台式)", moods: ["Comfort Food"] }, { name: "燒餅油條", moods: ["Comfort Food"] }, { name: "蔥油餅", moods: ["Comfort Food"] } ],
                "其他": [ { name: "水果拼盤", moods: ["健康清淡啲～"] }, { name: "能量棒", moods: ["快靚正", "健康清淡啲～"] }, { name: "飯糰 (便利店)", moods: ["快靚正"] }, { name: "即食麥皮", moods: ["健康清淡啲～", "快靚正"] }, { name: "隔夜燕麥杯", moods: ["健康清淡啲～"] }, { name: "乳酪飲品", moods: ["健康清淡啲～", "快靚正"] }, { name: "雞蛋仔", moods: ["快靚正", "Comfort Food"] }, { name: "藜麥杯", moods: ["健康清淡啲～"] }, { name: "希臘乳酪配蜜糖堅果", moods: ["健康清淡啲～", "想食豪啲！"] }, { name: "能量球 (Energy Balls)", moods: ["健康清淡啲～", "快靚正"] } ]
            },
            lunch: {
                "港式": [ { name: "碟頭飯 (例：粟米肉粒飯)", moods: ["快靚正", "Comfort Food"] }, { name: "焗豬扒飯", moods: ["Comfort Food", "想食豪啲！"] }, { name: "乾炒牛河", moods: ["Comfort Food"] }, { name: "車仔麵", moods: ["快靚正"] }, { name: "燒味飯 (例：叉燒飯)", moods: ["快靚正", "Comfort Food"] }, { name: "雲吞麵/牛腩河", moods: ["Comfort Food"] }, { name: "常餐", moods: ["快靚正", "Comfort Food"] }, { name: "炒粉麵 (例：星洲炒米)", moods: ["快靚正"] }, { name: "豆腐火腩飯", moods: ["Comfort Food"] }, { name: "枝竹火腩飯", moods: ["Comfort Food"] }, { name: "鮮茄焗豬扒飯", moods: ["Comfort Food", "想食豪啲！"] }, { name: "瑞士雞翼撈公仔麵", moods: ["Comfort Food"] }, { name: "XO醬海鮮炒飯", moods: ["想食豪啲！"] }, { name: "滑蛋蝦仁飯", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "福建炒飯", moods: ["Comfort Food"] } ],
                "中式": [ { name: "點心 (例：蝦餃燒賣)", moods: ["Comfort Food"] }, { name: "兩餸飯", moods: ["快靚正"] }, { name: "蒸飯套餐 (例：北菇蒸雞飯)", moods: ["健康清淡啲～", "快靚正"] }, { name: "湯飯/泡飯", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "麻婆豆腐飯", moods: ["Comfort Food"] }, { name: "水煮牛肉飯", moods: ["Comfort Food"] }, { name: "擔擔麵", moods: ["Comfort Food"] }, { name: "酸辣粉", moods: [] }, { name: "蘭州拉麵", moods: ["Comfort Food"] }, { name: "餃子 (水餃/煎餃)", moods: ["快靚正", "Comfort Food"] }, { name: "麻辣燙", moods: ["Comfort Food"] }, { name: "酸菜魚米線", moods: ["Comfort Food"] }, { name: "上海排骨菜飯", moods: ["Comfort Food"] }, { name: "北京炸醬麵", moods: ["Comfort Food"] }, { name: "揚州炒飯", moods: ["Comfort Food"] } ],
                "台式": [ { name: "滷肉飯", moods: ["Comfort Food", "快靚正"] }, { name: "雞肉飯", moods: ["健康清淡啲～", "快靚正"] }, { name: "台式牛肉麵", moods: ["Comfort Food", "想食豪啲！"] }, { name: "排骨便當", moods: ["快靚正", "Comfort Food"] }, { name: "鹽酥雞便當", moods: ["Comfort Food"] }, { name: "三杯雞飯", moods: ["Comfort Food"] }, { name: "刈包", moods: ["Comfort Food"] }, { name: "大腸麵線", moods: ["Comfort Food"] }, { name: "蚵仔煎", moods: ["Comfort Food"] }, { name: "筒仔米糕", moods: ["Comfort Food"] }, { name: "麻油雞飯", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "肉羹湯/飯/麵", moods: ["Comfort Food"] } ],
                "日式": [ { name: "壽司拼盤", moods: ["想食豪啲！", "健康清淡啲～"] }, { name: "刺身飯", moods: ["想食豪啲！", "健康清淡啲～"] }, { name: "豬扒丼", moods: ["Comfort Food"] }, { name: "親子丼", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "牛肉飯 (牛丼)", moods: ["快靚正", "Comfort Food"] }, { name: "拉麵 (豚骨/醬油/味噌)", moods: ["Comfort Food"] }, { name: "烏冬 (湯烏冬/炒烏冬)", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "日式咖喱飯", moods: ["Comfort Food"] }, { name: "天婦羅丼", moods: [] }, { name: "蕎麥麵/冷麵", moods: ["健康清淡啲～"] }, { name: "日式便當 (Bento)", moods: ["快靚正", "健康清淡啲～"] }, { name: "鰻魚飯 (輕量版)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "日式漢堡扒飯", moods: ["Comfort Food"] }, { name: "滑蛋豬扒飯 (勝丼)", moods: ["Comfort Food"] }, { name: "鐵板燒套餐", moods: ["想食豪啲！"] } ],
                "韓式": [ { name: "韓式拌飯 (Bibimbap)", moods: ["健康清淡啲～"] }, { name: "泡菜炒飯", moods: ["Comfort Food"] }, { name: "韓式炸醬麵", moods: ["Comfort Food"] }, { name: "豆腐海鮮湯配飯", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "韓式炸雞", moods: ["Comfort Food", "想食豪啲！"] }, { name: "部隊鍋", moods: ["Comfort Food"] }, { name: "紫菜包飯 (Kimbap)", moods: ["快靚正", "健康清淡啲～"] }, { name: "人參雞湯", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "韓式炒粉絲 (Japchae)", moods: ["健康清淡啲～"] }, { name: "辣炒年糕 (Tteokbokki)", moods: ["Comfort Food"] }, { name: "韓式冷麵 (Naengmyeon)", moods: ["健康清淡啲～"] }, { name: "石頭鍋飯 (Dolsot Bibimbap)", moods: ["Comfort Food"] }, { name: "韓式豬肉蓋飯 (Jeyuk Deopbap)", moods: ["Comfort Food"] } ],
                "西式": [ { name: "意粉 (肉醬/白汁/香草)", moods: ["Comfort Food"] }, { name: "薄餅 (Pizza)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "公司三文治配薯條", moods: ["快靚正", "Comfort Food"] }, { name: "西式沙律配雞扒/三文魚", moods: ["健康清淡啲～"] }, { name: "漢堡包餐", moods: ["快靚正", "Comfort Food"] }, { name: "焗薯配料", moods: ["Comfort Food"] }, { name: "西式湯配麵包", moods: ["健康清淡啲～"] }, { name: "烤雞/雞扒餐", moods: ["Comfort Food"] }, { name: "魚柳包配薯條", moods: ["快靚正"] }, { name: "意式肉丸意粉", moods: ["Comfort Food"] }, { name: "卡邦尼意粉", moods: ["Comfort Food", "想食豪啲！"] }, { name: "烤三文魚配雜菜", moods: ["健康清淡啲～", "想食豪啲！"] }, { name: "肉醬千層麵", moods: ["Comfort Food", "想食豪啲！"] } ],
                "東南亞": [ { name: "泰式豬頸肉飯", moods: ["Comfort Food"] }, { name: "青咖喱雞飯", moods: ["Comfort Food"] }, { name: "冬蔭功金邊粉", moods: [] }, { name: "海南雞飯", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "越南生牛肉河 (Pho)", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "扎肉撈檬", moods: ["健康清淡啲～"] }, { name: "喇沙 (Laksa)", moods: ["Comfort Food"] }, { name: "肉骨茶", moods: ["Comfort Food"] }, { name: "泰式炒河 (Pad See Ew)", moods: ["Comfort Food"] }, { name: "印尼炒飯 (Nasi Goreng)", moods: ["Comfort Food"] }, { name: "泰式船麵", moods: ["Comfort Food"] }, { name: "越南法式三文治 (Banh Mi)", moods: ["快靚正"] }, { name: "星洲炒蘿蔔糕", moods: ["Comfort Food"] }, { name: "泰式菠蘿炒飯", moods: ["Comfort Food"] }, { name: "馬來西亞椰漿飯 (Nasi Lemak)", moods: ["Comfort Food"] } ],
                "快餐/輕食": [ { name: "連鎖快餐套餐", moods: ["快靚正"] }, { name: "Subway潛艇堡", moods: ["快靚正", "健康清淡啲～"] }, { name: "便利店飯盒/意粉", moods: ["快靚正"] }, { name: "沙律杯", moods: ["健康清淡啲～", "快靚正"] }, { name: "杯麵", moods: ["快靚正", "Comfort Food"] }, { name: "烤雞卷餅 (Wrap)", moods: ["快靚正", "健康清淡啲～"] }, { name: "意式薄餅 (單片)", moods: ["快靚正"] }, { name: "熱狗", moods: ["快靚正", "Comfort Food"] }, { name: "墨西哥夾餅 (Quesadilla)", moods: ["快靚正", "Comfort Food"] }, { name: "即食湯包配麵包", moods: ["快靚正", "健康清淡啲～"] } ],
                "其他": [ { name: "印度咖喱配薄餅 (Naan)", moods: ["Comfort Food"] }, { name: "土耳其烤肉卷 (Kebab)", moods: ["快靚正"] }, { name: "墨西哥卷餅 (Burrito)", moods: ["Comfort Food"] }, { name: "中東旋轉烤肉 (Shawarma)", moods: ["快靚正"] }, { name: "希臘沙律 (Greek Salad)", moods: ["健康清淡啲～"] }, { name: "Poke Bowl (夏威夷魚生飯)", moods: ["健康清淡啲～"] }, { name: "俄羅斯餃子 (Pelmeni)", moods: ["Comfort Food"] }, { name: "西班牙小食 (Tapas)", moods: ["想食豪啲！"] } ]
            },
            afternoonTea: {
                "港式": [ { name: "西多士", moods: ["Comfort Food", "想食豪啲！"] }, { name: "炸雞脾薯條", moods: ["Comfort Food"] }, { name: "奶油豬仔包", moods: ["快靚正", "Comfort Food"] }, { name: "蛋撻", moods: ["快靚正", "Comfort Food"] }, { name: "菠蘿油", moods: ["Comfort Food"] }, { name: "公司三文治", moods: ["快靚正"] }, { name: "熱狗", moods: ["快靚正"] }, { name: "沙嗲牛肉包", moods: ["Comfort Food"] }, { name: "炸魚薯條 (茶記版)", moods: ["Comfort Food"] }, { name: "豬扒包", moods: ["Comfort Food"] }, { name: "雞尾包", moods: ["Comfort Food"] }, { name: "咖喱角", moods: ["Comfort Food"] }, { name: "炸鮮奶", moods: ["Comfort Food", "想食豪啲！"] }, { name: "花生醬格仔餅", moods: ["Comfort Food", "快靚正"] }, { name: "紅豆冰", moods: ["Comfort Food"] } ],
                "西式": [ { name: "英式鬆餅 (Scones)", moods: ["想食豪啲！"] }, { name: "Cupcakes", moods: [] }, { name: "Macarons", moods: ["想食豪啲！"] }, { name: "芝士蛋糕", moods: ["Comfort Food", "想食豪啲！"] }, { name: "窩夫 (Waffles)", moods: ["Comfort Food"] }, { name: "手指三文治", moods: ["健康清淡啲～", "快靚正"] }, { name: "Quiche (法式鹹派)", moods: [] }, { name: "美式冬甩 (Donuts)", moods: ["Comfort Food"] }, { name: "布朗尼 (Brownie)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "檸檬撻", moods: ["想食豪啲！"] }, { name: "水果撻", moods: ["健康清淡啲～", "想食豪啲！"] }, { name: "泡芙 (Cream Puff)", moods: ["Comfort Food"] }, { name: "瑪德蓮蛋糕 (Madeleine)", moods: ["想食豪啲！"] }, { name: "英式下午茶套餐", moods: ["想食豪啲！"] } ],
                "日式": [ { name: "和菓子", moods: ["健康清淡啲～"] }, { name: "抹茶卷蛋", moods: [] }, { name: "銅鑼燒 (Dorayaki)", moods: ["Comfort Food"] }, { name: "日式梳乎厘Pancake", moods: ["想食豪啲！"] }, { name: "鯛魚燒", moods: ["Comfort Food", "快靚正"] }, { name: "章魚小丸子 (Takoyaki)", moods: ["快靚正", "Comfort Food"] }, { name: "日式可麗餅 (Crepe)", moods: ["Comfort Food"] }, { name: "大福 (Daifuku)", moods: ["Comfort Food"] }, { name: "日式芝士撻", moods: ["Comfort Food", "想食豪啲！"] }, { name: "糰子 (Dango)", moods: ["Comfort Food"] }, { name: "蕨餅 (Warabimochi)", moods: ["健康清淡啲～"] } ],
                "台式": [ { name: "珍珠奶茶", moods: ["Comfort Food", "快靚正"] }, { name: "鹽酥雞 (小食)", moods: ["Comfort Food"] }, { name: "甜不辣", moods: ["Comfort Food", "快靚正"] }, { name: "芋圓豆花", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "車輪餅 (紅豆/奶油)", moods: ["Comfort Food", "快靚正"] }, { name: "台式香腸", moods: ["Comfort Food"] }, { name: "炸地瓜球", moods: ["Comfort Food"] }, { name: "仙草凍", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "愛玉冰", moods: ["健康清淡啲～"] }, { name: "鳳梨酥", moods: ["Comfort Food"] }, { name: "太陽餅", moods: ["Comfort Food"] } ],
                "中式": [ { name: "點心 (少量, 如春卷、鹹水角)", moods: ["快靚正"] }, { name: "糖水 (紅豆沙、綠豆沙、豆腐花)", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "砵仔糕", moods: ["快靚正", "Comfort Food"] }, { name: "茶粿", moods: [] }, { name: "老婆餅/老公餅", moods: ["Comfort Food"] }, { name: "豆沙窩餅", moods: ["Comfort Food"] }, { name: "擂沙湯圓", moods: ["Comfort Food"] }, { name: "馬仔", moods: ["Comfort Food"] }, { name: "芝麻卷", moods: ["Comfort Food"] }, { name: "白糖糕", moods: ["Comfort Food"] } ],
                "快餐/輕食": [ { name: "薯條", moods: ["快靚正", "Comfort Food"] }, { name: "雞翼", moods: ["Comfort Food"] }, { name: "迷你薄餅", moods: ["快靚正"] }, { name: "雞蛋仔", moods: ["快靚正", "Comfort Food"] }, { name: "格仔餅", moods: ["快靚正", "Comfort Food"] }, { name: "魚蛋燒賣 (街頭小食)", moods: ["快靚正", "Comfort Food"] }, { name: "炸雞塊", moods: ["Comfort Food"] }, { name: "粟米杯", moods: ["快靚正", "健康清淡啲～"] }, { name: "碗仔糕", moods: ["快靚正", "Comfort Food"] }, { name: "洋蔥圈", moods: ["Comfort Food"] }, { name: "雪糕/乳酪雪糕", moods: ["Comfort Food"] } ]
            },
            dinner: {
                "港式": [ { name: "鑊氣小炒 (例：咕嚕肉)", moods: ["Comfort Food"] }, { name: "海鮮餐 (例：豉椒炒蜆)", moods: ["想食豪啲！"] }, { name: "打冷 (潮州菜)", moods: [] }, { name: "煲仔飯", moods: ["Comfort Food"] }, { name: "火鍋 (打邊爐)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "雞煲", moods: ["想食豪啲！", "Comfort Food"] }, { name: "粥底火鍋", moods: ["健康清淡啲～"] }, { name: "避風塘炒蟹", moods: ["想食豪啲！"] }, { name: "乳鴿", moods: ["Comfort Food"] }, { name: "豉油王炒麵", moods: ["Comfort Food", "快靚正"] }, { name: "啫啫雞煲", moods: ["Comfort Food", "想食豪啲！"] }, { name: "金銀蛋浸時蔬", moods: ["健康清淡啲～"] }, { name: "大排檔小炒", moods: ["Comfort Food"] }, { name: "冬瓜盅", moods: ["健康清淡啲～", "想食豪啲！"] } ],
                "中式": [ { name: "粵菜酒樓 (例：片皮鴨, 蒸魚)", moods: ["想食豪啲！"] }, { name: "川菜 (例：水煮魚, 辣子雞)", moods: ["Comfort Food"] }, { name: "京滬菜 (例：小籠包, 北京填鴨)", moods: ["想食豪啲！"] }, { name: "客家菜 (例：梅菜扣肉)", moods: ["Comfort Food"] }, { name: "順德菜 (例：魚生)", moods: ["健康清淡啲～"] }, { name: "潮州菜 (例：滷水鵝)", moods: ["Comfort Food"] }, { name: "盆菜 (節慶)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "東坡肉", moods: ["Comfort Food", "想食豪啲！"] }, { name: "佛跳牆 (預訂)", moods: ["想食豪啲！"] }, { name: "私房菜", moods: ["想食豪啲！"] }, { name: "火鍋 (中式)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "羊腩煲", moods: ["Comfort Food", "想食豪啲！"] } ],
                "台式": [ { name: "三杯雞", moods: ["Comfort Food", "想食豪啲！"] }, { name: "滷肉飯套餐", moods: ["Comfort Food"] }, { name: "台式火鍋 (臭臭鍋/沙茶鍋)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "薑母鴨", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "鹽酥雞 (主菜)", moods: ["Comfort Food"] }, { name: "麻油雞", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "鳳梨苦瓜雞湯", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "客家小炒 (台式)", moods: ["Comfort Food"] }, { name: "蔭鼓蚵", moods: ["Comfort Food"] }, { name: "蒼蠅頭", moods: ["Comfort Food"] }, { name: "菜脯蛋", moods: ["Comfort Food"] }, { name: "花雕雞", moods: ["Comfort Food", "想食豪啲！"] } ],
                "日式": [ { name: "壽司Omakase", moods: ["想食豪啲！"] }, { name: "鐵板燒", moods: ["想食豪啲！"] }, { name: "天婦羅盛合", moods: [] }, { name: "鰻魚飯 (鰻重)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "日式火鍋 (Shabu Shabu/Sukiyaki)", moods: ["想食豪啲！", "Comfort Food", "健康清淡啲～"] }, { name: "居酒屋串燒", moods: ["Comfort Food"] }, { name: "爐端燒", moods: ["想食豪啲！"] }, { name: "懷石料理", moods: ["想食豪啲！", "健康清淡啲～"] }, { name: "壽喜燒 (Sukiyaki)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "串揚 (Kushikatsu)", moods: ["Comfort Food"] }, { name: "日式燒肉 (Yakiniku)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "蟹道樂式蟹宴", moods: ["想食豪啲！"] } ],
                "韓式": [ { name: "韓式烤肉 (KBBQ)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "部隊鍋", moods: ["Comfort Food"] }, { name: "人參雞湯", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "海鮮煎餅", moods: ["Comfort Food"] }, { name: "醬油蟹", moods: ["想食豪啲！"] }, { name: "安東雞", moods: ["Comfort Food"] }, { name: "韓式豬蹄 (Jokbal)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "泡菜鍋", moods: ["Comfort Food"] }, { name: "雪濃湯", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "韓式宮廷料理", moods: ["想食豪啲！", "健康清淡啲～"] }, { name: "辣燉排骨 (Maeun Galbijjim)", moods: ["Comfort Food", "想食豪啲！"] } ],
                "西式": [ { name: "牛扒 (西冷/肉眼)", moods: ["想食豪啲！"] }, { name: "羊架", moods: ["想食豪啲！"] }, { name: "烤春雞", moods: ["Comfort Food"] }, { name: "海鮮意大利飯 (Risotto)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "Fine Dining (多道菜套餐)", moods: ["想食豪啲！"] }, { name: "歐陸菜小館", moods: [] }, { name: "烤豬肋骨 (BBQ Ribs)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "威靈頓牛柳", moods: ["想食豪啲！"] }, { name: "法式洋蔥湯", moods: ["Comfort Food"] }, { name: "龍蝦湯", moods: ["想食豪啲！"] }, { name: "烤鴨胸", moods: ["想食豪啲！"] }, { name: "海鮮拼盤 (Seafood Platter)", moods: ["想食豪啲！"] } ],
                "意大利菜": [ { name: "各式手造意粉", moods: ["Comfort Food"] }, { name: "柴火烤薄餅", moods: ["Comfort Food"] }, { name: "意式燴牛仔膝 (Osso Buco)", moods: ["想食豪啲！"] }, { name: "千層麵 (Lasagna)", moods: ["Comfort Food"] }, { name: "墨魚汁意粉", moods: [] }, { name: "T骨牛扒 (Bistecca alla Fiorentina)", moods: ["想食豪啲！"] }, { name: "意式雲吞 (Ravioli)", moods: ["Comfort Food"] }, { name: "墨魚汁飯", moods: [] }, { name: "意式烤羊膝", moods: ["想食豪啲！", "Comfort Food"] }, { name: "松露意粉/飯", moods: ["想食豪啲！"] } ],
                "東南亞": [ { name: "泰國菜 (例：冬蔭功, 咖喱蟹)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "越南菜 (例：蔗蝦, 燒牛肉撈檬)", moods: ["健康清淡啲～"] }, { name: "星馬菜 (例：辣椒蟹, 參巴醬燒魚)", moods: ["想食豪啲！"] }, { name: "印尼菜 (例：巴東牛肉)", moods: ["Comfort Food"] }, { name: "馬來西亞沙嗲串燒", moods: ["Comfort Food"] }, { name: "泰式生蝦", moods: [] }, { name: "越南春卷", moods: ["健康清淡啲～"] }, { name: "泰式明爐魚", moods: ["健康清淡啲～", "想食豪啲！"] }, { name: "新加坡胡椒蟹", moods: ["想食豪啲！"] } ],
                "其他特色": [ { name: "西班牙海鮮飯 (Paella)", moods: ["想食豪啲！"] }, { name: "法國菜 (例：油封鴨腿)", moods: ["想食豪啲！"] }, { name: "印度菜 (例：Tandoori烤雞)", moods: ["Comfort Food"] }, { name: "墨西哥菜 (例：Tacos, Fajitas)", moods: ["Comfort Food"] }, { name: "德國菜 (例：鹹豬手)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "瑞士芝士火鍋 (Fondue)", moods: ["想食豪啲！", "Comfort Food"] }, { name: "俄羅斯菜 (例：羅宋湯, 俄式餃子)", moods: ["Comfort Food"] }, { name: "巴西烤肉", moods: ["想食豪啲！", "Comfort Food"] }, { name: "中東烤肉拼盤 (Mezze Platter)", moods: ["Comfort Food"] }, { name: "秘魯菜 (例：Ceviche)", moods: [] } ]
            },
            supper: {
                "港式": [ { name: "碗仔翅", moods: ["Comfort Food", "快靚正"] }, { name: "魚蛋燒賣 (街邊檔)", moods: ["快靚正", "Comfort Food"] }, { name: "炸大腸", moods: ["Comfort Food"] }, { name: "串燒 (港式)", moods: ["Comfort Food"] }, { name: "車仔麵 (宵夜檔)", moods: ["快靚正", "Comfort Food"] }, { name: "潮州打冷 (鵝片、蠔餅、凍蟹)", moods: ["想食豪啲！"] }, { name: "炒粉麵 (乾炒牛河、豉油王炒麵)", moods: ["Comfort Food", "快靚正"] }, { name: "即食麵加料", moods: ["快靚正", "Comfort Food"] }, { name: "煎釀三寶", moods: ["快靚正", "Comfort Food"] }, { name: "生菜魚肉湯", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "炒蜆", moods: ["Comfort Food"] }, { name: "炸雞脾", moods: ["Comfort Food"] }, { name: "狗仔粉", moods: ["Comfort Food"] }, { name: "艇仔粥", moods: ["Comfort Food", "健康清淡啲～"] } ],
                "中式": [ { name: "粥品 (皮蛋瘦肉粥、艇仔粥)", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "糖水 (芝麻糊、合桃糊、腐竹雞蛋)", moods: ["Comfort Food", "健康清淡啲～"] }, { name: "點心 (宵夜時段, 如蝦餃、燒賣)", moods: ["Comfort Food"] }, { name: "腸粉 (宵夜檔)", moods: ["快靚正", "Comfort Food"] }, { name: "粢飯豆漿 (宵夜檔)", moods: ["Comfort Food"] }, { name: "雲吞麵 (宵夜)", moods: ["Comfort Food"] }, { name: "糖不甩", moods: ["Comfort Food"] }, { name: "喳咋", moods: ["Comfort Food"] }, { name: "桑寄生蓮子蛋茶", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "麻辣小龍蝦", moods: ["Comfort Food", "想食豪啲！"] } ],
                "台式": [ { name: "鹽酥雞 (宵夜)", moods: ["Comfort Food", "快靚正"] }, { name: "甜不辣 (宵夜)", moods: ["Comfort Food", "快靚正"] }, { name: "大腸麵線 (宵夜)", moods: ["Comfort Food"] }, { name: "滷味拼盤 (台式)", moods: ["Comfort Food"] }, { name: "刈包 (宵夜)", moods: ["Comfort Food"] }, { name: "台式關東煮", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "蚵仔麵線", moods: ["Comfort Food"] }, { name: "台式炸物拼盤", moods: ["Comfort Food"] }, { name: "珍珠奶茶 (宵夜)", moods: ["Comfort Food", "快靚正"] } ],
                "日式": [ { name: "居酒屋小食 (串燒、枝豆、炸雞軟骨)", moods: ["Comfort Food"] }, { name: "拉麵 (宵夜份量)", moods: ["Comfort Food", "快靚正"] }, { name: "關東煮", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "日式炒麵 (Yakisoba)", moods: ["Comfort Food"] }, { name: "茶漬飯 (Ochazuke)", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "日式餃子 (宵夜)", moods: ["Comfort Food", "快靚正"] }, { name: "玉子燒", moods: ["Comfort Food", "快靚正"] }, { name: "清酒煮蜆", moods: ["Comfort Food"] } ],
                "快餐/輕食": [ { name: "即食麵 (自己煮)", moods: ["快靚正", "Comfort Food"] }, { name: "便利店關東煮/點心", moods: ["快靚正"] }, { name: "薯片/零食", moods: ["Comfort Food"] }, { name: "杯麵", moods: ["快靚正", "Comfort Food"] }, { name: "麥當勞/KFC (24小時分店)", moods: ["快靚正"] }, { name: "叮叮點心/飯盒", moods: ["快靚正"] }, { name: "芝士撈麵", moods: ["Comfort Food", "快靚正"] }, { name: "烤蕃薯", moods: ["健康清淡啲～", "Comfort Food"] }, { name: "熱狗腸仔", moods: ["快靚正", "Comfort Food"] }, { name: "微波爐爆谷", moods: ["Comfort Food"] } ],
                "其他": [ { name: "串燒 (新疆/沙嗲)", moods: ["Comfort Food"] }, { name: "甜品 (B仔涼粉、芒果糯米糍、楊枝甘露)", moods: ["Comfort Food"] }, { name: "台式鹽酥雞", moods: ["Comfort Food"] }, { name: "韓式炸雞 (外賣宵夜)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "滷味 (台式/港式)", moods: ["Comfort Food"] }, { name: "Pizza (外賣)", moods: ["Comfort Food", "想食豪啲！"] }, { name: "臭豆腐", moods: [] }, { name: "麻辣燙 (宵夜)", moods: ["Comfort Food"] }, { name: "土匪雞翼", moods: ["Comfort Food"] } ]
            }
        };

        const moods = {
            "any": "是但啦/冇所謂",
            "rich": "想食豪啲！",
            "healthy": "健康清淡啲～",
            "quick": "快靚正！",
            "comfort": "Comfort Food慰勞下自己"
        };

        const hongKongDistricts = {
            "中西區": ["中環", "金鐘", "上環", "西環", "堅尼地城", "石塘咀", "半山"],
            "灣仔區": ["灣仔", "銅鑼灣", "跑馬地", "大坑", "鵝頸橋", "天后", "金鐘 (近灣仔部分)"],
            "東區": ["北角", "鰂魚涌", "太古", "西灣河", "筲箕灣", "柴灣", "小西灣", "杏花邨", "炮台山"],
            "南區": ["薄扶林", "香港仔", "鴨脷洲", "黃竹坑", "深水灣", "淺水灣", "赤柱", "石澳", "數碼港", "華富"],
            "油尖旺區": ["尖沙咀", "佐敦", "油麻地", "旺角", "太子", "大角咀", "西九龍"],
            "深水埗區": ["深水埗", "長沙灣", "荔枝角", "美孚", "石硤尾", "南昌"],
            "九龍城區": ["紅磡", "黃埔花園", "何文田", "九龍塘", "九龍城", "土瓜灣", "啟德", "樂富 (近九龍城部分)"],
            "黃大仙區": ["黃大仙", "鑽石山", "新蒲崗", "慈雲山", "樂富", "牛池灣", "竹園", "橫頭磡"],
            "觀塘區": ["觀塘", "牛頭角", "九龍灣", "藍田", "油塘", "秀茂坪", "順利邨", "APM", "德福廣場"],
            "葵青區": ["葵涌", "青衣", "荔景", "葵芳", "葵興", "貨櫃碼頭"],
            "荃灣區": ["荃灣", "深井", "汀九", "馬灣", "荃灣西", "愉景新城", "麗城"],
            "屯門區": ["屯門市中心", "蝴蝶灣", "黃金海岸", "掃管笏", "屯門碼頭", "藍地", "兆康", "良景"],
            "元朗區": ["元朗市中心", "天水圍", "錦田", "八鄉", "洪水橋", "屏山", "廈村", "流浮山", "YOHO Mall"],
            "北區": ["上水", "粉嶺", "沙頭角", "打鼓嶺", "皇后山", "聯和墟"],
            "大埔區": ["大埔墟", "太和", "大埔中心", "白石角", "大埔滘", "船灣", "科學園 (近大埔部分)"],
            "沙田區": ["沙田市中心", "大圍", "火炭", "馬鞍山", "烏溪沙", "小瀝源", "石門", "第一城", "科學園 (近沙田部分)"],
            "西貢區": ["西貢市中心", "將軍澳 (寶琳, 坑口, 調景嶺, 康城)", "清水灣", "科技大學"],
            "離島區": ["東涌", "愉景灣", "長洲", "坪洲", "南丫島", "大澳", "梅窩", "機場", "貝澳", "塘福"]
        };

        // --- Expanded Restaurant Data (Targeting >150 entries, "台式" separated) ---
        const restaurantData = [
            // 港式
            { name: "澳洲牛奶公司", cuisine: "港式", district: ["佐敦"], note: "炒蛋多士, 燉奶", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "華嫂冰室", cuisine: "港式", district: ["灣仔", "觀塘", "元朗市中心", "尖沙咀"], note: "菠蘿包, 番茄豬扒通粉", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "金鳳茶餐廳", cuisine: "港式", district: ["灣仔"], note: "酥皮蛋撻, 雞批", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "九記牛腩", cuisine: "港式", district: ["中環"], note: "清湯牛腩, 咖喱牛筋腩", moods: ["Comfort Food"], price: "$$" },
            { name: "添好運點心專門店", cuisine: "港式", district: ["旺角", "深水埗", "中環", "北角", "將軍澳"], note: "酥皮焗叉燒包", moods: ["快靚正", "Comfort Food"], price: "$$" },
            { name: "大班樓", cuisine: "港式", district: ["中環"], note: "雞油花雕蒸花蟹, 樟茶鴨", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "鏞記酒家", cuisine: "港式", district: ["中環"], note: "燒鵝, 皮蛋酸薑", moods: ["想食豪啲！", "Comfort Food"], price: "$$$" },
            { name: "坤記煲仔小菜", cuisine: "港式", district: ["西環"], note: "臘味煲仔飯, 豉汁白鱔煲仔飯", moods: ["Comfort Food"], price: "$$" },
            { name: "勝香園", cuisine: "港式", district: ["中環"], note: "茄牛通, 檸蜜脆脆", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "蘭芳園", cuisine: "港式", district: ["中環", "尖沙咀"], note: "絲襪奶茶, 豬扒包, 蔥油雞扒撈丁", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "新香園 (堅記)", cuisine: "港式", district: ["深水埗"], note: "豬手麵, 蛋牛治", moods: ["快靚正", "Comfort Food", "宵夜佳選"], price: "$" },
            { name: "民聲冰室", cuisine: "港式", district: ["大坑"], note: "鹹蛋蒸肉餅, 瑞士雞翼", moods: ["Comfort Food"], price: "$$" },
            { name: "陸羽茶室", cuisine: "港式", district: ["中環"], note: "傳統點心, 杏汁白肺湯", moods: ["想食豪啲！"], price: "$$$" },
            { name: "一點心", cuisine: "港式", district: ["太子", "旺角"], note: "即叫即蒸點心", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "蓮香居", cuisine: "港式", district: ["上環"], note: "傳統點心車仔點心, 豬潤燒賣", moods: ["Comfort Food"], price: "$$" },
            { name: "祥興記上海生煎包", cuisine: "港式", district: ["旺角", "尖沙咀", "銅鑼灣"], note: "生煎包", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "翠華餐廳", cuisine: "港式", district: ["尖沙咀", "中環", "銅鑼灣", "旺角", "機場"], note: "連鎖茶餐廳, 魚蛋粉, 奶油豬", moods: ["快靚正", "Comfort Food"], price: "$$" },
            { name: "太興", cuisine: "港式", district: ["旺角", "銅鑼灣", "觀塘", "沙田市中心"], note: "燒味, 冰鎮奶茶", moods: ["快靚正", "Comfort Food"], price: "$$" },
            { name: "澳門茶餐廳", cuisine: "港式", district: ["尖沙咀", "銅鑼灣", "上環"], note: "葡撻, 豬扒包, 咖喱牛腩", moods: ["Comfort Food"], price: "$$" },
            { name: "何洪記粥麵專家", cuisine: "港式", district: ["銅鑼灣"], note: "米芝蓮粥麵, 乾炒牛河", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "一粥麵", cuisine: "港式", district: ["樂富", "黃大仙", "荃灣"], note: "連鎖粥麵店, 套餐", moods: ["快靚正", "健康清淡啲～"], price: "$" },
            { name: "靠得住粥麵小館", cuisine: "港式", district: ["灣仔", "中環", "鰂魚涌"], note: "魚湯粥品, 艇仔粥", moods: ["Comfort Food", "健康清淡啲～"], price: "$$" },
            { name: "佳佳甜品", cuisine: "港式", district: ["佐敦"], note: "中式糖水, 芝麻糊, 合桃糊", moods: ["Comfort Food", "宵夜佳選"], price: "$" },
            { name: "通達食店", cuisine: "港式", district: ["元朗市中心", "旺角", "太子"], note: "街頭小食, 魚蛋, 腸粉", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "蛇王芬", cuisine: "港式", district: ["中環"], note: "蛇羹, 臘味飯", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "星座冰室", cuisine: "港式", district: ["尖沙咀"], note: "番茄麵, 炒蛋", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "金華冰廳", cuisine: "港式", district: ["太子"], note: "菠蘿油, 蛋撻", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "華星冰室", cuisine: "港式", district: ["灣仔", "旺角", "筲箕灣"], note: "黑松露炒蛋多士, 校長多士", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "永華麵家", cuisine: "港式", district: ["灣仔"], note: "竹昇麵, 雲吞麵", moods: ["Comfort Food"], price: "$$" },
            { name: "新記餐廳 (車仔麵)", cuisine: "港式", district: ["銅鑼灣", "尖沙咀"], note: "車仔麵, 瑞士雞翼", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "周記點心", cuisine: "港式", district: ["西環"], note: "流沙西多士, 蝦多士", moods: ["Comfort Food"], price: "$" },
            { name: "生記粥品專家", cuisine: "港式", district: ["上環"], note: "魚腩粥, 及第粥", moods: ["Comfort Food", "健康清淡啲～"], price: "$" },
            { name: "麥文記麵家", cuisine: "港式", district: ["佐敦"], note: "全蝦雲吞麵, 豬手撈麵", moods: ["Comfort Food"], price: "$$" },
            { name: "四季煲仔飯", cuisine: "港式", district: ["油麻地"], note: "炭爐煲仔飯", moods: ["Comfort Food"], price: "$" },
            { name: "澳洲牛奶公司 (分店)", cuisine: "港式", district: ["灣仔"], note: "炒蛋多士 (較少人)", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "海安咖啡室", cuisine: "港式", district: ["上環"], note: "懷舊冰室, 蔥油雞扒", moods: ["Comfort Food"], price: "$" },
            { name: "瑞記咖啡", cuisine: "港式", district: ["上環"], note: "樽仔奶茶, 蛋牛治", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "德如茶餐廳", cuisine: "港式", district: ["灣仔"], note: "家常小菜, 碟頭飯", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "祥利飯店", cuisine: "港式", district: ["灣仔"], note: "鑊氣小炒, 碟頭飯", moods: ["Comfort Food"], price: "$$" },

            // 中式
            { name: "詠藜園四川擔擔麵", cuisine: "中式", district: ["黃大仙", "尖沙咀"], note: "擔擔麵, 四川小菜", moods: ["Comfort Food"], price: "$$" },
            { name: "北京樓", cuisine: "中式", district: ["金鐘", "中環", "尖沙咀", "旺角", "太古"], note: "片皮鴨, 京式點心", moods: ["想食豪啲！"], price: "$$$" },
            { name: "美心皇宮", cuisine: "中式", district: ["中環", "金鐘", "銅鑼灣", "旺角", "沙田市中心"], note: "粵式點心, 婚宴酒席", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "東海薈拉斐特", cuisine: "中式", district: ["尖沙咀", "銅鑼灣"], note: "精緻粵菜, 點心", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "胡同", cuisine: "中式", district: ["尖沙咀"], note: "北方菜, 維港景", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "三希樓", cuisine: "中式", district: ["中環", "銅鑼灣"], note: "川菜, 水煮魚", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "夜上海", cuisine: "中式", district: ["金鐘", "尖沙咀"], note: "上海菜, 蟹粉菜式", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "好到底麵家", cuisine: "中式", district: ["元朗市中心"], note: "蝦籽撈麵, 雲吞麵", moods: ["Comfort Food"], price: "$" },
            { name: "麥奀雲吞麵世家", cuisine: "中式", district: ["中環", "佐敦", "銅鑼灣"], note: "傳統雲吞麵", moods: ["Comfort Food"], price: "$$" },
            { name: "海底撈火鍋", cuisine: "中式", district: ["油麻地", "銅鑼灣", "旺角"], note: "川式火鍋, 服務周到", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "龍景軒", cuisine: "中式", district: ["中環"], note: "米芝蓮三星粵菜", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "卅二公館 (Mott 32)", cuisine: "中式", district: ["中環"], note: "摩登中菜, 叉燒", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "利苑酒家", cuisine: "中式", district: ["中環", "灣仔", "旺角", "觀塘"], note: "粵菜, 點心, 燉湯", moods: ["想食豪啲！", "Comfort Food"], price: "$$$" },
            { name: "譽瓏軒", cuisine: "中式", district: ["中環"], note: "高級粵菜 (澳門過江龍)", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "張公館", cuisine: "中式", district: ["銅鑼灣"], note: "創意中菜", moods: ["想食豪啲！"], price: "$$$" },
            { name: "農圃飯店", cuisine: "中式", district: ["銅鑼灣", "中環"], note: "傳統粵菜", moods: ["想食豪啲！", "Comfort Food"], price: "$$$" },
            { name: "書湘門第", cuisine: "中式", district: ["灣仔", "西環"], note: "湖南菜", moods: ["Comfort Food"], price: "$$" },
            { name: "老上海飯店", cuisine: "中式", district: ["灣仔"], note: "傳統上海菜", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "鄧記 (四川菜)", cuisine: "中式", district: ["灣仔"], note: "正宗川菜", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "新斗記", cuisine: "中式", district: ["佐敦", "灣仔", "中環"], note: "燒乳豬, 小炒", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "名人坊高級粵菜", cuisine: "中式", district: ["中環"], note: "米芝蓮粵菜", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "西苑酒家", cuisine: "中式", district: ["銅鑼灣", "太古"], note: "傳統粵菜, 叉燒", moods: ["想食豪啲！", "Comfort Food"], price: "$$$" },
            { name: "國金軒 (Cuisine Cuisine)", cuisine: "中式", district: ["中環", "尖沙咀"], note: "高級粵菜, 維港景", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "天龍軒", cuisine: "中式", district: ["尖沙咀"], note: "米芝蓮二星粵菜, 酒店頂樓", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "一點心 (荃灣分店)", cuisine: "中式", district: ["荃灣"], note: "即叫即蒸點心", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "陸陸雞煲火鍋", cuisine: "中式", district: ["旺角", "銅鑼灣"], note: "雞煲, 火鍋", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "唐閣", cuisine: "中式", district: ["尖沙咀"], note: "米芝蓮三星粵菜", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "福臨門酒家", cuisine: "中式", district: ["灣仔"], note: "富豪飯堂, 傳統粵菜", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "家全七福酒家", cuisine: "中式", district: ["灣仔"], note: "精緻粵菜", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "好彩海鮮酒家", cuisine: "中式", district: ["北角", "旺角"], note: "海鮮, 粵菜", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "大都烤鴨", cuisine: "中式", district: ["尖沙咀"], note: "北京烤鴨", moods: ["想食豪啲！"], price: "$$$" },
            { name: "王子飯店", cuisine: "中式", district: ["尖沙咀"], note: "京川滬菜", moods: ["想食豪啲！"], price: "$$$" },
            { name: "鴻星海鮮酒家", cuisine: "中式", district: ["灣仔", "觀塘", "旺角"], note: "卡通點心, 海鮮", moods: ["Comfort Food"], price: "$$$" },
            { name: "鳳城酒家", cuisine: "中式", district: ["太子", "北角"], note: "順德菜", moods: ["Comfort Food"], price: "$$" },

            // 台式
            { name: "鼎泰豐", cuisine: "台式", district: ["銅鑼灣", "尖沙咀", "沙田市中心", "旺角"], note: "小籠包, 排骨蛋炒飯", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "程班長台灣美食", cuisine: "台式", district: ["荔枝角", "九龍灣"], note: "牛肉麵, 滷肉飯", moods: ["Comfort Food", "快靚正"], price: "$$" },
            { name: "阿元來了", cuisine: "台式", district: ["西環", "觀塘"], note: "滷肉飯, 蛋餅, 小食", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "叁和院台灣風格飲食", cuisine: "台式", district: ["旺角"], note: "創意台菜, 包點可愛", moods: ["Comfort Food"], price: "$$" },
            { name: "Check In Taipei", cuisine: "台式", district: ["旺角", "尖沙咀", "銅鑼灣"], note: "新派台菜, 珍珠奶茶火鍋", moods: ["Comfort Food"], price: "$$" },
            { name: "吃什麼 What's To Eat", cuisine: "台式", district: ["深水埗", "太子"], note: "台式便當, 小食", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "茶木‧台式休閒餐廳", cuisine: "台式", district: ["銅鑼灣", "旺角", "荃灣", "沙田市中心"], note: "台式套餐, 甜品, 珍珠奶茶", moods: ["Comfort Food", "快靚正"], price: "$$" },
            { name: "九份飽", cuisine: "台式", district: ["旺角", "銅鑼灣", "荃灣"], note: "台式麵食, 滷味", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "我想和你無所事事", cuisine: "台式", district: ["旺角"], note: "文青風台式餐廳, 輕食", moods: ["Comfort Food", "健康清淡啲～"], price: "$$" },
            { name: "小時光scoool", cuisine: "台式", district: ["長沙灣"], note: "台式家常便飯, 懷舊風格", moods: ["Comfort Food", "健康清淡啲～"], price: "$$" },
            { name: "一起食堂", cuisine: "台式", district: ["太子"], note: "台式便當, 麵線", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "幸福週末", cuisine: "台式", district: ["銅鑼灣"], note: "台式厚多士, 飲品", moods: ["Comfort Food"], price: "$$" },
            { name: "天仁茗茶 (喫茶趣)", cuisine: "台式", district: ["銅鑼灣", "金鐘", "旺角"], note: "茶料理, 珍珠奶茶", moods: ["健康清淡啲～", "Comfort Food"], price: "$$" },
            { name: "龍鳳號", cuisine: "台式", district: ["灣仔"], note: "滷肉飯, 刈包", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "請坐 (Seat Please)", cuisine: "台式", district: ["旺角", "尖沙咀"], note: "台式料理, 芋圓", moods: ["Comfort Food"], price: "$$" },
            { name: "老媽拌麵 (香港店)", cuisine: "台式", district: ["中環", "銅鑼灣"], note: "即食拌麵, 堂食套餐", moods: ["快靚正", "Comfort Food"], price: "$$" },
            { name: "圓圓 (Yuan Is Here)", cuisine: "台式", district: ["西環", "旺角"], note: "滷肉飯, 鹽酥雞", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "燈籠滷味", cuisine: "台式", district: ["旺角"], note: "台式滷味", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "老虎堂黑糖專売", cuisine: "台式", district: ["多區"], note: "黑糖珍珠鮮奶", moods: ["Comfort Food"], price: "$" },
            { name: "幸福堂", cuisine: "台式", district: ["多區"], note: "手炒黑糖珍珠鮮奶", moods: ["Comfort Food"], price: "$" },
            { name: "艋舺雞排", cuisine: "台式", district: ["旺角"], note: "台式炸雞排", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "度小月擔仔麵", cuisine: "台式", district: ["銅鑼灣"], note: "擔仔麵, 滷肉飯", moods: ["Comfort Food"], price: "$$" },
            { name: "春水堂", cuisine: "台式", district: ["觀塘", "尖沙咀"], note: "珍珠奶茶始祖, 台式餐點", moods: ["Comfort Food"], price: "$$" },
            { name: "永康牛肉麵 (香港店)", cuisine: "台式", district: ["銅鑼灣"], note: "紅燒牛肉麵", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "阿甘麵館", cuisine: "台式", district: ["北角"], note: "台式麵食, 小菜", moods: ["Comfort Food", "快靚正"], price: "$" },

            // 日式 (Continue adding to reach target)
            { name: "一蘭拉麵", cuisine: "日式", district: ["銅鑼灣", "尖沙咀", "旺角"], note: "豚骨拉麵", moods: ["Comfort Food", "快靚正"], price: "$$" },
            { name: "壽司郎", cuisine: "日式", district: ["佐敦", "黃埔花園", "荔枝角", "旺角", "多區"], note: "迴轉壽司", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "和民居食屋", cuisine: "日式", district: ["銅鑼灣", "旺角", "荃灣", "多區"], note: "綜合日式料理", moods: ["Comfort Food", "快靚正"], price: "$$" },
            { name: "俺流塩らーめん", cuisine: "日式", district: ["銅鑼灣", "尖沙咀", "中環"], note: "鹽味拉麵, 沾麵", moods: ["Comfort Food"], price: "$$" },
            { name: "Sushi Saito", cuisine: "日式", district: ["中環"], note: "頂級Omakase", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "Yardbird", cuisine: "日式", district: ["上環"], note: "日式串燒 (雞肉專門)", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "Zuma", cuisine: "日式", district: ["中環"], note: "現代日式料理, 早午餐", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "豚王", cuisine: "日式", district: ["中環", "銅鑼灣", "尖沙咀", "沙田市中心"], note: "豚骨拉麵, 限定王", moods: ["Comfort Food"], price: "$$" },
            { name: "丸龜製麵", cuisine: "日式", district: ["中環", "旺角", "觀塘", "多區"], note: "自助烏冬, 天婦羅", moods: ["快靚正", "健康清淡啲～"], price: "$" },
            { name: "牛角日本燒肉專門店", cuisine: "日式", district: ["銅鑼灣", "旺角", "尖沙咀", "多區"], note: "日式燒肉放題/套餐", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "AFURI 辛紅", cuisine: "日式", district: ["銅鑼灣", "尖沙咀"], note: "柚子鹽拉麵, 辣味拉麵", moods: ["Comfort Food"], price: "$$" },
            { name: "權八居酒屋 (Gonpachi)", cuisine: "日式", district: ["銅鑼灣"], note: "串燒, 蕎麥麵, 電影Kill Bill場景", moods: ["想食豪啲！", "Comfort Food"], price: "$$$" },
            { name: "Sushiyoshi 壽司芳", cuisine: "日式", district: ["尖沙咀"], note: "Omakase, 創意壽司", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "Monster Sushi", cuisine: "日式", district: ["旺角", "尖沙咀", "銅鑼灣"], note: "創意卷物, 刺身", moods: ["Comfort Food"], price: "$$" },
            { name: "金田長壽司", cuisine: "日式", district: ["尖沙咀"], note: "Omakase, 熟客多", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "竹壽司 (Sushi Takeda)", cuisine: "日式", district: ["中環"], note: "Omakase", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "一門 (Ichimon)", cuisine: "日式", district: ["尖沙咀"], note: "拉麵, 沾麵", moods: ["Comfort Food"], price: "$$" },
            { name: "銀座いわ (Ginza Iwa)", cuisine: "日式", district: ["中環"], note: "米芝蓮壽司", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "天海 (Tenkai)", cuisine: "日式", district: ["尖沙咀"], note: "天婦羅Omakase", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "漁獲浜燒 (Uo-Show Hamayaki)", cuisine: "日式", district: ["銅鑼灣"], note: "浜燒海鮮", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "富士山55沾麵屋", cuisine: "日式", district: ["銅鑼灣", "旺角"], note: "沾麵專門店", moods: ["Comfort Food"], price: "$$" },
            { name: "三田製麵所", cuisine: "日式", district: ["銅鑼灣", "尖沙咀", "旺角"], note: "濃厚豚骨魚介沾麵", moods: ["Comfort Food"], price: "$$" },
            { name: "吉豚屋吉列豬扒專門店 (Katsuya)", cuisine: "日式", district: ["銅鑼灣", "旺角", "多區"], note: "吉列豬扒飯", moods: ["Comfort Food", "快靚正"], price: "$" },
            { name: "鳥華亭 (Torihana Tei)", cuisine: "日式", district: ["銅鑼灣", "中環"], note: "親子丼, 雞肉料理", moods: ["Comfort Food"], price: "$$$" },
            { name: "鮨魯山", cuisine: "日式", district: ["灣仔"], note: "Omakase", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "八兵衛 (Hachibei)", cuisine: "日式", district: ["中環"], note: "博多串燒", moods: ["想食豪啲！", "Comfort Food"], price: "$$$" },
            { name: "穴藏 (Ana Gura)", cuisine: "日式", district: ["中環"], note: "Omakase, 隱世小店", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "拉麵Jo (Ramen Jo)", cuisine: "日式", district: ["銅鑼灣"], note: "橫濱家系拉麵", moods: ["Comfort Food"], price: "$$" },
            { name: "Sake Central", cuisine: "日式", district: ["中環"], note: "清酒吧, 佐酒小食", moods: ["想食豪啲！"], price: "$$$" },
            { name: "UMI", cuisine: "日式", district: ["中環"], note: "Omakase", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "Nadai Unatoto (名代宇奈とと)", cuisine: "日式", district: ["尖沙咀", "銅鑼灣"], note: "平價鰻魚飯", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "金子半之助", cuisine: "日式", district: ["葵芳", "九龍灣"], note: "江戶前天丼", moods: ["Comfort Food"], price: "$$" },
            { name: "一幻拉麵", cuisine: "日式", district: ["中環", "尖沙咀"], note: "蝦湯拉麵", moods: ["Comfort Food"], price: "$$" },
            { name: "鮨見 (Sushi Gin)", cuisine: "日式", district: ["銅鑼灣"], note: "Omakase", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "東京築地食堂", cuisine: "日式", district: ["太古"], note: "魚生飯, 壽司", moods: ["Comfort Food"], price: "$$" },

            // 韓式 (Continued)
            { name: "O'taste", cuisine: "韓式", district: ["銅鑼灣"], note: "韓式小食, 炸雞", moods: ["快靚正", "Comfort Food"], price: "$" },
            { name: "Mr. Korea BBQ", cuisine: "韓式", district: ["旺角"], note: "韓燒", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "Seoul Recipe", cuisine: "韓式", district: ["中環", "金鐘"], note: "韓式外賣, 飯卷", moods: ["快靚正", "健康清淡啲～"], price: "$$" },
            { name: "江南韓國料理 (Gangnam)", cuisine: "韓式", district: ["銅鑼灣"], note: "傳統韓菜", moods: ["Comfort Food"], price: "$$$" },
            { name: "BBQ 7080", cuisine: "韓式", district: ["旺角", "尖沙咀"], note: "懷舊韓燒", moods: ["Comfort Food"], price: "$$" },

            // 西式/意大利菜 (Continued)
            { name: "BLT Steak", cuisine: "西式", district: ["尖沙咀"], note: "美式扒房", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "Jamie's Italian", cuisine: "意大利菜", district: ["銅鑼灣", "尖沙咀"], note: "Jamie Oliver 意菜", moods: ["Comfort Food"], price: "$$$" },
            { name: "The Butchers Club Burger", cuisine: "西式", district: ["灣仔", "中環"], note: "乾式熟成牛肉漢堡", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "Pirata", cuisine: "意大利菜", district: ["灣仔"], note: "意大利菜, 早午餐", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "Linguini Fini", cuisine: "意大利菜", district: ["中環"], note: "手造意粉, 薄餅", moods: ["Comfort Food"], price: "$$$" },
            { name: "LMO Freshly Baked by Richard Ekkebus", cuisine: "西式", district: ["中環"], note: "高級麵包糕點 (Amber旗下)", moods: ["想食豪啲！"], price: "$$$" },
            { name: "Popinjays", cuisine: "西式", district: ["中環"], note: "天台餐廳酒吧, 歐陸菜", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "The Chinnery", cuisine: "西式", district: ["中環"], note: "傳統英式菜, 文華東方酒店", moods: ["想食豪啲！", "Comfort Food"], price: "$$$$" },
            { name: "LucAle", cuisine: "意大利菜", district: ["西環"], note: "意式小館, 手造意粉", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "Associazione Chianti", cuisine: "意大利菜", district: ["灣仔"], note: "托斯卡納扒房", moods: ["想食豪啲！", "Comfort Food"], price: "$$$$" },
            { name: "Frank's Italian American", cuisine: "意大利菜", district: ["中環"], note: "美式意大利菜 (Fini's 姊妹店)", moods: ["Comfort Food"], price: "$$$" },
            { name: "The Peak Lookout", cuisine: "西式", district: ["山頂"], note: "國際美食, 山頂景色", moods: ["想食豪啲！"], price: "$$$" },
            { name: "Spasso", cuisine: "意大利菜", district: ["尖沙咀"], note: "意大利菜, 維港景", moods: ["想食豪啲！", "Comfort Food"], price: "$$$" },
            { name: "NOM - Not Only Meatballs", cuisine: "意大利菜", district: ["中環"], note: "肉丸, 意大利家常菜", moods: ["Comfort Food"], price: "$$$" },
            { name: "The Verandah", cuisine: "西式", district: ["淺水灣"], note: "殖民地風格餐廳, 自助餐/下午茶", moods: ["想食豪啲！"], price: "$$$$" },

            // 東南亞 (Continued)
            { name: "金不換泰國餐廳", cuisine: "東南亞", district: ["九龍城"], note: "地道泰國菜", moods: ["Comfort Food"], price: "$$" },
            { name: "泰屋 (Thai Basil)", cuisine: "東南亞", district: ["金鐘"], note: "精緻泰國菜", moods: ["想食豪啲！"], price: "$$$" },
            { name: "Chôm Chôm", cuisine: "東南亞", district: ["中環"], note: "越南街頭小食", moods: ["Comfort Food"], price: "$$$" },
            { name: "Pho Bar", cuisine: "東南亞", district: ["中環"], note: "越南牛肉粉", moods: ["Comfort Food", "快靚正"], price: "$$" },
            { name: "Ruam", cuisine: "東南亞", district: ["灣仔"], note: "泰國酒吧餐廳", moods: ["Comfort Food"], price: "$$$" },
            { name: "Sip Song", cuisine: "東南亞", district: ["淺水灣"], note: "泰國海邊餐廳", moods: ["Comfort Food", "想食豪啲！"], price: "$$$" },
            { name: "Cococabana", cuisine: "東南亞", district: ["深水灣"], note: "地中海/亞洲Fusion (但有時被歸類東南亞風情)", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "Aaharn", cuisine: "東南亞", district: ["中環"], note: "高級泰國菜 (David Thompson)", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "Mekong Vietnamese Restaurant", cuisine: "東南亞", district: ["愉景灣"], note: "越南菜", moods: ["Comfort Food"], price: "$$" },
            { name: "Papparich", cuisine: "東南亞", district: ["銅鑼灣", "將軍澳"], note: "馬來西亞連鎖餐廳", moods: ["Comfort Food", "快靚正"], price: "$$" },
            { name: "小曼谷泰國菜館", cuisine: "東南亞", district: ["九龍城"], note: "人氣泰國菜", moods: ["Comfort Food"], price: "$$" },
            { name: "越男仔", cuisine: "東南亞", district: ["旺角", "銅鑼灣"], note: "越南湯粉", moods: ["Comfort Food", "快靚正"], price: "$" },

            // 快餐/輕食 (Continued)
            { name: "Triple O's by White Spot", cuisine: "快餐/輕食", district: ["金鐘", "中環"], note: "加拿大漢堡, 奶昔", moods: ["Comfort Food", "快靚正"], price: "$$" },
            { name: "Pret A Manger", cuisine: "快餐/輕食", district: ["多區"], note: "三文治, 沙律", moods: ["快靚正", "健康清淡啲～"], price: "$$" },
            { name: "BEP Express", cuisine: "快餐/輕食", district: ["中環"], note: "越南快餐, 撈檬", moods: ["快靚正", "健康清淡啲～"], price: "$" },
            { name: "KALE", cuisine: "快餐/輕食", district: ["中環", "灣仔"], note: "健康沙律, 卷餅", moods: ["健康清淡啲～", "快靚正"], price: "$$" },

            // 其他特色 (Continued)
            { name: "The Pontiac", cuisine: "其他特色", district: ["中環"], note: "美式酒吧, 雞尾酒", moods: ["Comfort Food"], price: "$$$" },
            { name: "Shady Acres", cuisine: "其他特色", district: ["中環"], note: "葡萄酒吧, 小食", moods: ["Comfort Food"], price: "$$$" },
            { name: "Honbo", cuisine: "其他特色", district: ["灣仔", "中環"], note: "美式漢堡", moods: ["Comfort Food"], price: "$$" },
            { name: "Teakha 茶。家", cuisine: "其他特色", district: ["上環"], note: "茶館, 輕食, 蛋糕", moods: ["健康清淡啲～", "Comfort Food"], price: "$$" },
            { name: "The Old Man", cuisine: "其他特色", district: ["中環"], note: "亞洲最佳酒吧之一 (海明威主題)", moods: ["想食豪啲！"], price: "$$$" },
            { name: "COBO House", cuisine: "其他特色", district: ["尖沙咀"], note: "藝術 X 餐飲, 亞洲菜", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "Duddell's 都爹利會館", cuisine: "其他特色", district: ["中環"], note: "米芝蓮粵菜, 藝術空間", moods: ["想食豪啲！"], price: "$$$$" },
            { name: "Little Creatures", cuisine: "其他特色", district: ["堅尼地城"], note: "澳洲手工啤酒廠, 西式小食", moods: ["Comfort Food"], price: "$$$" },
            { name: "Second Draft", cuisine: "其他特色", district: ["大坑"], note: "本地手工啤酒, 亞洲風味小食", moods: ["Comfort Food"], price: "$$$" },
            { name: "The Diplomat", cuisine: "其他特色", district: ["中環"], note: "雞尾酒吧, 小食", moods: ["想食豪啲！"], price: "$$$" },
            { name: "Penicillin", cuisine: "其他特色", district: ["中環"], note: "環保概念酒吧, 小食", moods: ["想食豪啲！"], price: "$$$" },
            { name: "Shari Shari Kakigori House 氷屋", cuisine: "其他特色", district: ["銅鑼灣", "中環"], note: "日式刨冰", moods: ["Comfort Food"], price: "$$" },
            { name: "Elephant Grounds", cuisine: "其他特色", district: ["中環", "灣仔", "銅鑼灣", "尖沙咀"], note: "咖啡店, 雪糕三文治, 輕食", moods: ["Comfort Food", "健康清淡啲～"], price: "$$" },
            { name: "NOC Coffee Co.", cuisine: "其他特色", district: ["中環", "西環", "灣仔", "多區"], note: "精品咖啡, 輕食", moods: ["健康清淡啲～", "快靚正"], price: "$$" }
        ];


        const districtCentralPoints = {
            "中西區": { lat: 22.283, lon: 114.158 }, "灣仔區": { lat: 22.277, lon: 114.173 },
            "東區": { lat: 22.285, lon: 114.213 }, "南區": { lat: 22.247, lon: 114.154 },
            "油尖旺區": { lat: 22.319, lon: 114.170 }, "深水埗區": { lat: 22.330, lon: 114.162 },
            "九龍城區": { lat: 22.328, lon: 114.187 }, "黃大仙區": { lat: 22.342, lon: 114.195 },
            "觀塘區": { lat: 22.313, lon: 114.225 }, "葵青區": { lat: 22.357, lon: 114.129 },
            "荃灣區": { lat: 22.372, lon: 114.115 }, "屯門區": { lat: 22.392, lon: 113.976 },
            "元朗區": { lat: 22.445, lon: 114.028 }, "北區": { lat: 22.493, lon: 114.142 },
            "大埔區": { lat: 22.447, lon: 114.168 }, "沙田區": { lat: 22.381, lon: 114.189 },
            "西貢區": { lat: 22.315, lon: 114.260 },
            "離島區": { lat: 22.289, lon: 113.940 }
        };

        let activeMealType = null;
        let activeMood = "any";
        let activeCuisine = null;
        let activeDistrictL1 = null;
        let activeDistrictL2 = null;
        let lastSuggestedMeal = null;

        function mealTypeToChinese(mealTypeKey) { return ({ breakfast: '早餐', lunch: '午餐', afternoonTea: '下午茶', dinner: '晚餐', supper: '宵夜' })[mealTypeKey] || '時段'; }
        function highlightSelectedButton(buttonGroup, selectedButtonElement) { buttonGroup.forEach(btn => { btn.classList.remove('selected-btn'); if (btn.classList.contains('mood-btn')) { btn.classList.remove('bg-purple-500', 'text-white'); btn.classList.add('bg-purple-400', 'text-purple-800'); } else if (btn.classList.contains('cuisine-btn')) { btn.classList.remove('bg-sky-500', 'text-white'); btn.classList.add('bg-sky-400', 'text-sky-800'); } }); if (selectedButtonElement) { selectedButtonElement.classList.add('selected-btn'); if (selectedButtonElement.classList.contains('mood-btn')) { selectedButtonElement.classList.remove('bg-purple-400', 'text-purple-800'); selectedButtonElement.classList.add('bg-purple-500', 'text-white'); } else if (selectedButtonElement.classList.contains('cuisine-btn')) { selectedButtonElement.classList.remove('bg-sky-400', 'text-sky-800'); selectedButtonElement.classList.add('bg-sky-500', 'text-white'); } } }
        function resetPageDetails() { activeMood = "any"; activeCuisine = null; activeDistrictL1 = null; activeDistrictL2 = null; lastSuggestedMeal = null; renderMoodButtons(); cuisineSelectionArea.innerHTML = ''; districtLevel1Dropdown.innerHTML = '<option value="">請選擇區域 (十八區)...</option>'; districtLevel2Dropdown.innerHTML = '<option value="">請選擇詳細地區...</option>'; districtLevel2Dropdown.disabled = true; txtSuggestion.textContent = '請選擇心情及菜式，或按「隨機揀個菜式」'; txtRestaurantSuggestion.innerHTML = ''; btnTryAgainMeal.classList.add('hidden'); districtSelectionContainer.classList.add('hidden'); restaurantSuggestionArea.classList.add('hidden'); googleMapsLinkContainer.classList.add('hidden'); highlightSelectedButton(cuisineSelectionArea.querySelectorAll('button'), null); locationStatusMessage.textContent = ''; aiCookingStepsDisplayArea.classList.add('hidden'); aiCookingStepsDisplayArea.innerHTML = ''; btnAiCookingSteps.classList.add('hidden'); aiDishLoadingMessage.classList.add('hidden'); aiCookingStepsLoadingMessage.classList.add('hidden'); btnAiSuggestDishForCuisine.disabled = true; }
        function showPage(pageId) { if (pageId === 'pageMealTimeSelection') { pageMealTimeSelection.classList.remove('hidden'); pageDetailsSelection.classList.add('hidden'); initialPrompt.textContent = '請先選擇「時段」'; } else if (pageId === 'pageDetailsSelection') { pageMealTimeSelection.classList.add('hidden'); pageDetailsSelection.classList.remove('hidden'); selectedMealTimeHeader.textContent = mealTypeToChinese(activeMealType); } }
        function renderMoodButtons() { moodSelectionArea.innerHTML = ''; Object.keys(moods).forEach(moodKey => { const btn = document.createElement('button'); btn.textContent = moods[moodKey]; btn.dataset.mood = moodKey; btn.classList.add('mood-btn', 'bg-purple-400', 'hover:bg-purple-500', 'text-purple-800', 'font-semibold', 'py-2', 'px-3', 'rounded-lg', 'shadow', 'text-sm', 'transform', 'hover:scale-105'); if (moodKey === activeMood) { highlightSelectedButton(moodSelectionArea.querySelectorAll('button'), btn); btn.classList.add('selected-btn', 'bg-purple-500', 'text-white'); btn.classList.remove('bg-purple-400', 'text-purple-800');} btn.addEventListener('click', () => { activeMood = moodKey; highlightSelectedButton(moodSelectionArea.querySelectorAll('button'), btn); if (activeCuisine) { makeMealSuggestion(activeMealType, activeCuisine); if (activeDistrictL2) { findRestaurants(activeCuisine, activeDistrictL2); } } }); moodSelectionArea.appendChild(btn); });}
        function renderCuisineOptions(mealType, preSelectedCuisineKey) { cuisineSelectionArea.innerHTML = ''; districtSelectionContainer.classList.add('hidden'); restaurantSuggestionArea.classList.add('hidden'); googleMapsLinkContainer.classList.add('hidden'); btnTryAgainMeal.classList.add('hidden'); btnAiSuggestDishForCuisine.disabled = true; aiSuggestDishCuisineName.textContent = ''; if (!mealData[mealType] || Object.keys(mealData[mealType]).length === 0) { txtSuggestion.textContent = `此時段 (${mealTypeToChinese(mealType)}) 暫未有菜式分類。`; return; } const cuisines = Object.keys(mealData[mealType]); cuisines.forEach(cuisineKey => { const btn = document.createElement('button'); btn.textContent = cuisineKey; btn.dataset.cuisine = cuisineKey; btn.classList.add('cuisine-btn', 'bg-sky-400', 'hover:bg-sky-500', 'text-sky-800', 'font-semibold', 'py-2', 'px-3', 'sm:px-4', 'rounded-lg', 'shadow', 'text-sm', 'sm:text-base', 'transform', 'hover:scale-105'); btn.addEventListener('click', () => { activeCuisine = cuisineKey; highlightSelectedButton(cuisineSelectionArea.querySelectorAll('button'), btn); makeMealSuggestion(activeMealType, activeCuisine); txtRestaurantSuggestion.innerHTML = ''; restaurantSuggestionArea.classList.add('hidden'); googleMapsLinkContainer.classList.add('hidden'); activeDistrictL1 = null; activeDistrictL2 = null; districtLevel1Dropdown.value = ""; districtLevel2Dropdown.innerHTML = '<option value="">請選擇詳細地區...</option>'; districtLevel2Dropdown.disabled = true; btnAiSuggestDishForCuisine.disabled = false; aiSuggestDishCuisineName.textContent = activeCuisine; }); cuisineSelectionArea.appendChild(btn); }); if (preSelectedCuisineKey) { const btnToHighlight = cuisineSelectionArea.querySelector(`button[data-cuisine="${preSelectedCuisineKey}"]`); if (btnToHighlight) { highlightSelectedButton(cuisineSelectionArea.querySelectorAll('button'), btnToHighlight); btnAiSuggestDishForCuisine.disabled = false; aiSuggestDishCuisineName.textContent = activeCuisine;} } }
        function populateDistrictLevel1Dropdown() { districtLevel1Dropdown.innerHTML = '<option value="">請選擇區域 (十八區)...</option>'; Object.keys(hongKongDistricts).forEach(districtL1 => { const option = document.createElement('option'); option.value = districtL1; option.textContent = districtL1; districtLevel1Dropdown.appendChild(option); }); districtSelectionContainer.classList.remove('hidden'); districtLevel2Dropdown.innerHTML = '<option value="">請選擇詳細地區...</option>'; districtLevel2Dropdown.disabled = true; }
        function populateDistrictLevel2Dropdown(selectedDistrictL1) { districtLevel2Dropdown.innerHTML = '<option value="">請選擇詳細地區...</option>'; if (selectedDistrictL1 && hongKongDistricts[selectedDistrictL1]) { hongKongDistricts[selectedDistrictL1].forEach(districtL2 => { const option = document.createElement('option'); option.value = districtL2; option.textContent = districtL2; districtLevel2Dropdown.appendChild(option); }); districtLevel2Dropdown.disabled = false; } else { districtLevel2Dropdown.disabled = true; } }
        function makeMealSuggestion(mealType, cuisine, isAiSuggested = false, aiDishName = null) {
            btnAiCookingSteps.classList.add('hidden'); // Hide AI cooking steps button initially
            aiCookingStepsDisplayArea.classList.add('hidden');
            aiCookingStepsDisplayArea.innerHTML = '';

            if (!mealType || !cuisine) {
                txtSuggestion.textContent = `請先選擇時段和菜式。`;
                lastSuggestedMeal = null;
                btnTryAgainMeal.classList.add('hidden');
                districtSelectionContainer.classList.add('hidden');
                googleMapsLinkContainer.classList.add('hidden');
                return;
            }
            if (!mealData[mealType] || !mealData[mealType][cuisine] || mealData[mealType][cuisine].length === 0 && !isAiSuggested) {
                txtSuggestion.textContent = `暫時未有 ${mealTypeToChinese(mealType)} - ${cuisine || '未知菜式'} 嘅建議。`;
                lastSuggestedMeal = null;
                btnTryAgainMeal.classList.add('hidden');
                districtSelectionContainer.classList.add('hidden');
                googleMapsLinkContainer.classList.add('hidden');
                return;
            }

            let finalSuggestionName = null;
            let moodMatchNote = "";

            if (isAiSuggested && aiDishName) {
                finalSuggestionName = aiDishName;
                 moodMatchNote = `<br><span class="text-xs text-purple-600">(✨ AI 菜式靈感 ✨)</span>`;
            } else {
                let potentialMeals = mealData[mealType][cuisine];
                let moodFilteredMeals = [];
                let finalSuggestionObj = null;

                if (activeMood !== "any") {
                    moodFilteredMeals = potentialMeals.filter(meal => meal.moods && meal.moods.includes(moods[activeMood]));
                }

                if (moodFilteredMeals.length > 0) {
                    finalSuggestionObj = moodFilteredMeals[Math.floor(Math.random() * moodFilteredMeals.length)];
                } else if (potentialMeals.length > 0) {
                    finalSuggestionObj = potentialMeals[Math.floor(Math.random() * potentialMeals.length)];
                    if (activeMood !== "any") {
                        moodMatchNote = `<br><span class="text-xs text-gray-500">(呢個菜式未有特別符合「${moods[activeMood]}」嘅建議，不如試下呢個？)</span>`;
                    }
                }
                if (finalSuggestionObj) {
                    finalSuggestionName = finalSuggestionObj.name;
                }
            }


            if (finalSuggestionName) {
                lastSuggestedMeal = finalSuggestionName;
                txtSuggestion.innerHTML = `
                    <span class="block text-sm text-gray-500">${mealTypeToChinese(mealType)} - ${cuisine}</span>
                    ${lastSuggestedMeal}
                    ${moodMatchNote}
                `;
                txtSuggestion.classList.remove('suggestion-update');
                void txtSuggestion.offsetWidth;
                txtSuggestion.classList.add('suggestion-update');
                btnTryAgainMeal.classList.remove('hidden');
                btnAiCookingSteps.classList.remove('hidden');
                aiCookingStepsDishName.textContent = lastSuggestedMeal;
            } else {
                txtSuggestion.textContent = `喺 ${cuisine} 搵唔到建議。`;
                lastSuggestedMeal = null;
                btnTryAgainMeal.classList.add('hidden');
                btnAiCookingSteps.classList.add('hidden');
            }

            populateDistrictLevel1Dropdown();
            // Retain district selection if already made
            if (activeDistrictL1) {
                districtLevel1Dropdown.value = activeDistrictL1;
                populateDistrictLevel2Dropdown(activeDistrictL1);
                if (activeDistrictL2) {
                     const l2OptionExists = Array.from(districtLevel2Dropdown.options).some(opt => opt.value === activeDistrictL2);
                    if(l2OptionExists) districtLevel2Dropdown.value = activeDistrictL2;
                    else activeDistrictL2 = null; // L2 not valid for this L1, reset
                }
            } else {
                restaurantSuggestionArea.classList.add('hidden');
                googleMapsLinkContainer.classList.add('hidden');
                txtRestaurantSuggestion.innerHTML = '';
            }
            if (activeDistrictL2 && activeCuisine) { // If L2 was retained and valid, refresh restaurants
                 findRestaurants(activeCuisine, activeDistrictL2);
            }
        }
        function findRestaurants(cuisine, districtL2) { if (!cuisine || !districtL2) { restaurantSuggestionArea.classList.add('hidden'); googleMapsLinkContainer.classList.add('hidden'); return; } let potentialRestaurants = restaurantData.filter(r =>r.cuisine === cuisine && r.district.includes(districtL2)); let moodFilteredRestaurants = []; let wasMoodFiltered = false; if (activeMood !== "any") { moodFilteredRestaurants = potentialRestaurants.filter(r => { let matches = r.moods && r.moods.includes(moods[activeMood]); if (activeMood === "rich" && r.price && !['$$$', '$$$$'].includes(r.price)) { matches = false; } if (activeMood === "quick" && r.price && !['$', '$$'].includes(r.price)) { matches = matches && (r.cuisine === "快餐/輕食" || (r.price === '$' || r.price === '$$')); } return matches; }); wasMoodFiltered = true; } const finalRestaurantList = (wasMoodFiltered && moodFilteredRestaurants.length > 0) ? moodFilteredRestaurants : potentialRestaurants; const noPerfectMoodMatchButFallbacked = wasMoodFiltered && moodFilteredRestaurants.length === 0 && potentialRestaurants.length > 0; restaurantSuggestionArea.classList.remove('hidden'); txtRestaurantSuggestion.classList.remove('suggestion-update'); void txtRestaurantSuggestion.offsetWidth; if (finalRestaurantList.length > 0) { let html = `<h4 class="text-md font-semibold mb-2 text-sky-800">${districtL2}嘅${cuisine}餐廳推介`; if (wasMoodFiltered && !noPerfectMoodMatchButFallbacked && moodFilteredRestaurants.length > 0) { html += ` (符合「${moods[activeMood]}」心情)`; } else if (noPerfectMoodMatchButFallbacked) { html += ` <span class="text-sm text-gray-600">(「${moods[activeMood]}」心情未能完全匹配)</span>`; } html += `：</h4><ul class="list-disc text-left text-sm sm:text-base text-sky-700 space-y-1">`; finalRestaurantList.forEach(r => { const restaurantSearchQuery = `${districtL2} ${r.name}`; html += `<li><a href="https://www.google.com/search?q=${encodeURIComponent(restaurantSearchQuery)}" target="_blank" class="restaurant-link">${r.name}</a> ${r.price ? `(${r.price})` : ''} ${r.note ? `- ${r.note}` : ''}</li>`; }); html += "</ul>"; txtRestaurantSuggestion.innerHTML = html; } else { let noMatchMsg = `喺${districtL2}暫時未搵到「${cuisine}」嘅餐廳。`; if (wasMoodFiltered) { noMatchMsg = `喺${districtL2}暫時未搵到符合「${cuisine}」及「${moods[activeMood]}」心情嘅餐廳。`; } txtRestaurantSuggestion.innerHTML = `<p class="text-md text-sky-700">${noMatchMsg}</p>`; } txtRestaurantSuggestion.classList.add('suggestion-update'); const searchQuery = `${districtL2} ${cuisine} ${lastSuggestedMeal || '餐廳'} ${activeMood !== "any" ? moods[activeMood] : ''}`; googleMapsLink.href = `https://www.google.com/search?q=${encodeURIComponent(searchQuery.trim())}`; googleMapsLinkContainer.classList.remove('hidden'); }
        function deg2rad(deg) { return deg * (Math.PI/180); }
        function calculateDistance(lat1, lon1, lat2, lon2) { var R = 6371; var dLat = deg2rad(lat2-lat1); var dLon = deg2rad(lon2-lon1); var a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon/2) * Math.sin(dLon/2); var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); return R * c; }
        function findClosestDistrict(userLat, userLon) { let closestDistrict = null; let shortestDistance = Infinity; for (const districtName in districtCentralPoints) { const point = districtCentralPoints[districtName]; const distance = calculateDistance(userLat, userLon, point.lat, point.lon); if (distance < shortestDistance) { shortestDistance = distance; closestDistrict = districtName; } } return closestDistrict; }
        function geolocationSuccess(position) { const userLat = position.coords.latitude; const userLon = position.coords.longitude; locationStatusMessage.textContent = `成功讀取座標：緯度 ${userLat.toFixed(3)}, 經度 ${userLon.toFixed(3)}`; const closestDistrictL1 = findClosestDistrict(userLat, userLon); if (closestDistrictL1) { activeDistrictL1 = closestDistrictL1; districtLevel1Dropdown.value = closestDistrictL1; const changeEventL1 = new Event('change'); districtLevel1Dropdown.dispatchEvent(changeEventL1); locationStatusMessage.textContent += `\n已嘗試估算你位於「${closestDistrictL1}」。請選擇詳細地區或手動修改。`; } else { locationStatusMessage.textContent += '\n未能估算你所在的區域。'; } }
        function geolocationError(error) {
            let message = "讀取位置時發生錯誤：";
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    message += "你已拒絕位置讀取請求。";
                    break;
                case error.POSITION_UNAVAILABLE:
                    message += "無法獲取當前位置資訊。";
                    break;
                case error.TIMEOUT:
                    message += "讀取位置請求超時。";
                    break;
                default:
                    message += "發生未知錯誤。";
                    break;
            }
            locationStatusMessage.textContent = message;
        }

        // --- Gemini API Call Function ---
        async function callGeminiAPI(prompt, loadingMessageElement, displayElement, isForDishName = false) {
            loadingMessageElement.classList.remove('hidden');
            displayElement.classList.add('hidden');
            if(!isForDishName) displayElement.innerHTML = ''; // Clear previous steps only if not for dish name

            let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiKey = ""; // Provided by Canvas environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) {
                    const errorBody = await response.text();
                    throw new Error(`API 請求失敗，狀態碼：${response.status}. ${errorBody}`);
                }
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    if (isForDishName) {
                        // Update the suggestion area with AI dish name
                        makeMealSuggestion(activeMealType, activeCuisine, true, text.trim());
                    } else {
                        // Display cooking steps
                        displayElement.innerHTML = `<h5 class="font-semibold mb-2">✨ AI 簡易煮法：${lastSuggestedMeal} ✨</h5><div class="text-sm whitespace-pre-wrap">${text}</div>`;
                        displayElement.classList.remove('hidden');
                    }
                } else {
                    throw new Error("AI 未能提供有效嘅回應。");
                }
            } catch (error) {
                console.error("Gemini API Error:", error);
                if (isForDishName) {
                    txtSuggestion.innerHTML += `<br><span class="text-xs text-red-500">AI 菜式建議失敗：${error.message}</span>`;
                } else {
                    displayElement.innerHTML = `<p class="text-red-500">獲取煮法失敗：${error.message}</p>`;
                    displayElement.classList.remove('hidden');
                }
            } finally {
                loadingMessageElement.classList.add('hidden');
            }
        }


        // --- Event Listeners ---
        mealTimeButtons.forEach(button => { button.addEventListener('click', () => { activeMealType = button.dataset.mealtype; showPage('pageDetailsSelection'); resetPageDetails(); renderCuisineOptions(activeMealType); txtSuggestion.textContent = '請選擇心情及菜式，或按「隨機揀個菜式」'; }); });
        btnGoBack.addEventListener('click', () => { activeMealType = null; showPage('pageMealTimeSelection'); });
        districtLevel1Dropdown.addEventListener('change', (event) => { activeDistrictL1 = event.target.value; populateDistrictLevel2Dropdown(activeDistrictL1); activeDistrictL2 = null; districtLevel2Dropdown.value = ""; restaurantSuggestionArea.classList.add('hidden'); googleMapsLinkContainer.classList.add('hidden'); });
        districtLevel2Dropdown.addEventListener('change', (event) => { activeDistrictL2 = event.target.value; if (activeDistrictL2 && activeCuisine) { findRestaurants(activeCuisine, activeDistrictL2); } else { restaurantSuggestionArea.classList.add('hidden'); googleMapsLinkContainer.classList.add('hidden'); } });

        btnAiSuggestDishForCuisine.addEventListener('click', () => {
            if (!activeMealType || !activeCuisine) {
                alert("請先選擇時段同菜式類別！"); // Use custom modal in future
                return;
            }
            const prompt = `為香港的${mealTypeToChinese(activeMealType)}時段，建議一個有創意的${activeCuisine}菜式名稱。心情是：${moods[activeMood]}。請只提供菜式名稱，不要任何其他文字。`;
            callGeminiAPI(prompt, aiDishLoadingMessage, txtSuggestion, true);
        });

        btnAiCookingSteps.addEventListener('click', () => {
            if (!lastSuggestedMeal) {
                alert("請先獲取一個菜式建議！"); // Use custom modal in future
                return;
            }
            const prompt = `請提供「${lastSuggestedMeal}」的簡易煮食步驟，適合香港家庭。`;
            callGeminiAPI(prompt, aiCookingStepsLoadingMessage, aiCookingStepsDisplayArea, false);
        });


        btnSurpriseCuisine.addEventListener('click', () => {
            if (!activeMealType) return;
            const storedL1 = activeDistrictL1;
            const storedL2 = activeDistrictL2;

            const cuisinesForMealType = Object.keys(mealData[activeMealType]);
            if (cuisinesForMealType.length === 0) { txtSuggestion.textContent = `此時段 (${mealTypeToChinese(activeMealType)}) 暫未有菜式可供隨機選擇。`; cuisineSelectionArea.innerHTML = `<p class="text-gray-600">此時段 (${mealTypeToChinese(activeMealType)}) 暫未有菜式分類。</p>`; btnTryAgainMeal.classList.add('hidden'); districtSelectionContainer.classList.add('hidden'); restaurantSuggestionArea.classList.add('hidden'); googleMapsLinkContainer.classList.add('hidden'); return; }
            const randomCuisine = cuisinesForMealType[Math.floor(Math.random() * cuisinesForMealType.length)];
            activeCuisine = randomCuisine;
            const cuisineBtnToSelect = cuisineSelectionArea.querySelector(`button[data-cuisine="${activeCuisine}"]`);
            if (cuisineBtnToSelect) {
                highlightSelectedButton(cuisineSelectionArea.querySelectorAll('button'), cuisineBtnToSelect);
                btnAiSuggestDishForCuisine.disabled = false;
                aiSuggestDishCuisineName.textContent = activeCuisine;
            }

            makeMealSuggestion(activeMealType, activeCuisine);

            if (storedL1) {
                districtLevel1Dropdown.value = storedL1;
                activeDistrictL1 = storedL1;
                populateDistrictLevel2Dropdown(storedL1);
                if (storedL2) {
                    const l2OptionExists = Array.from(districtLevel2Dropdown.options).some(opt => opt.value === storedL2);
                    if (l2OptionExists) {
                        districtLevel2Dropdown.value = storedL2;
                        activeDistrictL2 = storedL2;
                        findRestaurants(activeCuisine, activeDistrictL2);
                    } else {
                        activeDistrictL2 = null; districtLevel2Dropdown.value = "";
                    }
                } else {
                     activeDistrictL2 = null; districtLevel2Dropdown.value = "";
                }
            } else {
                activeDistrictL1 = null; activeDistrictL2 = null;
                districtLevel1Dropdown.value = "";
                districtLevel2Dropdown.innerHTML = '<option value="">請選擇詳細地區...</option>';
                districtLevel2Dropdown.disabled = true;
                restaurantSuggestionArea.classList.add('hidden');
                googleMapsLinkContainer.classList.add('hidden');
            }
        });

        btnTryAgainMeal.addEventListener('click', () => {
            if (activeMealType && activeCuisine) {
                const storedL1 = activeDistrictL1;
                const storedL2 = activeDistrictL2;
                makeMealSuggestion(activeMealType, activeCuisine);
                if (storedL1) {
                    districtLevel1Dropdown.value = storedL1;
                    activeDistrictL1 = storedL1;
                    populateDistrictLevel2Dropdown(storedL1);
                    if (storedL2) {
                         const l2OptionExists = Array.from(districtLevel2Dropdown.options).some(opt => opt.value === storedL2);
                        if (l2OptionExists) {
                            districtLevel2Dropdown.value = storedL2;
                            activeDistrictL2 = storedL2;
                            findRestaurants(activeCuisine, activeDistrictL2);
                        } else {
                            activeDistrictL2 = null; districtLevel2Dropdown.value = "";
                        }
                    } else {
                        activeDistrictL2 = null; districtLevel2Dropdown.value = "";
                    }
                } else {
                    activeDistrictL1 = null; activeDistrictL2 = null;
                    districtLevel1Dropdown.value = "";
                    districtLevel2Dropdown.innerHTML = '<option value="">請選擇詳細地區...</option>';
                    districtLevel2Dropdown.disabled = true;
                    restaurantSuggestionArea.classList.add('hidden');
                    googleMapsLinkContainer.classList.add('hidden');
                }
            } else if (activeMealType) {
                 btnSurpriseCuisine.click();
            }
        });

        btnGetLocation.addEventListener('click', () => { if (navigator.geolocation) { locationStatusMessage.textContent = "嘗試讀取你的位置中..."; navigator.geolocation.getCurrentPosition(geolocationSuccess, geolocationError, { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }); } else { locationStatusMessage.textContent = "你的瀏覽器不支援地理位置功能。"; } });
        currentYearSpan.textContent = new Date().getFullYear();
        showPage('pageMealTimeSelection');
    </script>
</body>
</html>
